<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Other topics - Hyacinth Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Other topics";
        var mkdocs_page_input_path = "misc.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Hyacinth Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting_started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../core_concepts/">Core Concepts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../variables/">Variables</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../control_flow/">Control Flow</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../functions/">Functions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../records/">Records</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../type_synonyms/">Type synonyms</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Other topics</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#type-inference">Type Inference</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#union-compatible-types">Union-compatible Types</a>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Hyacinth Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Other topics</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="other-topics">Other topics</h1>
<h2 id="type-inference">Type Inference</h2>
<p>As seen in previous examples, in some cases Hyacinth can infer variable types, function parameter types, and type arguments, and type annotations can be omitted. The Hyacinth compiler uses bidirectional type-checking, so information about type expectations flows from the outside in. Unlike some other systems using Hindley-Milner style type inference, Hyacinth does not make any type inferences about identifiers from how they are used.</p>
<h2 id="union-compatible-types">Union-compatible Types</h2>
<p>If expressions, case expressions, and field access on a record union all create an expression could be one of multiple types. If all branches have the same type, then there's no problem, and the expression has the type of the branches. However, the branches are allowed to have different types only if they meet the following conditions</p>
<ul>
<li>The type of each branch is a record type or record union type</li>
<li>If a record type appears in multiple branches, it must have the same type parameters in each branch</li>
</ul>
<p>For example, here's an example of valid code with if expressions.</p>
<pre><code>// combo1 has type Foo⟨Int⟩ | Bar
let combo1 = if _condition_
    then Foo⟨Int⟩[value = 5]
    else Bar
// combo2 has type Foo⟨Int⟩ | Baz
let combo2 = if _condition_
    then Foo⟨Int⟩[value = 10]
    else Baz
// combo3 has type Foo⟨Int⟩ | Bar | Baz
let combo3 = if _condition_
    then combo1
    else combo2

rec Foo = ⟨T⟩ =&gt; [value: T];
rec Bar = [];
rec Baz = [];
</code></pre>
<p>And here's an example of valid code with field access on a record union.</p>
<pre><code>rec A = [value: X];
rec B = [value: Y];
rec X = [];
rec Y = [];

let foo: A | B = _value_;
// bar has type X | Y
let bar = foo.value;
</code></pre>
<p>The following example is invalid, as one branch is a non-record type.</p>
<pre><code>rec Foo = [];

let bar = if _condition_
    then Foo
    else 5;
</code></pre>
<p>And this final example is invalid because branches have different type parameters for the same record.</p>
<pre><code>rec Box = ⟨T⟩ =&gt; [value: T];

let foo = if _condition_
    then Box⟨Int⟩[value = 3]
    else Box⟨String⟩[value = &quot;foo&quot;];
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../type_synonyms/" class="btn btn-neutral float-left" title="Type synonyms"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../type_synonyms/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
